(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{14:function(e,t,a){},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(8),o=a.n(r),l=(a(14),a(1)),s=a.n(l),m=a(2),i=a(3),u=a(4),d=a(6),g=a(5),h=(a(16),a(17),function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).getImageDetails=Object(m.a)(s.a.mark((function e(){var t,a,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.id,e.next=3,fetch("https://boiling-refuge-66454.herokuapp.com/images/".concat(t));case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,n.setState({imageUrl:c.url,comments:c.comments});case 8:case"end":return e.stop()}}),e)}))),n.handleChange=function(e){var t=e.target,a=t.name,c=t.value;"name"!==a?n.setState({comment:c}):n.setState({name:c})},n.handleSubmit=function(){var e=Object(m.a)(s.a.mark((function e(t){var a,c,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=n.state,c=a.name,r=a.comment,o=a.id,e.prev=2,e.next=5,fetch("https://boiling-refuge-66454.herokuapp.com/images/".concat(o,"/comments"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:c,comment:r})});case 5:if(e.sent.ok){e.next=8;break}throw new Error("response not 'OK'");case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Fetch request error:",e.t0.message);case 13:n.setState({name:"",comment:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();var c=n.props.id;return n.state={id:c,imageUrl:null,comments:[],name:"",comment:""},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getImageDetails()}},{key:"render",value:function(){var e=this.props.toggleModal,t=this.state,a=t.imageUrl,n=t.comments,r=t.name,o=t.comment;return c.a.createElement("div",{className:"modal-window"},c.a.createElement("div",{className:"modal-container"},c.a.createElement("div",{className:"modal-content"},a&&c.a.createElement("img",{className:"modal-img",src:a,alt:""})),c.a.createElement("div",{className:"modal-comments"},n.length<1?c.a.createElement("div",{className:"comment comment-placeholder"},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432 \u043d\u0435\u0442"):n.map((function(e){var t=e.id,a=e.text,n=e.date;return c.a.createElement("div",{className:"comment",id:t,key:t},c.a.createElement("div",{className:"modal-date"},function(e){var t=new Date(e),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear();return"".concat(a<10?"0".concat(a):a,".").concat(n<10?"0".concat(n):n,".").concat(c)}(n)),c.a.createElement("div",{className:"modal-comment"},a))}))),c.a.createElement("form",{className:"comment-form",onSubmit:this.handleSubmit},c.a.createElement("input",{className:"form-input",type:"text",name:"name",required:!0,placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",value:r,onChange:this.handleChange}),c.a.createElement("input",{className:"form-input",type:"text",name:"comment",required:!0,value:o,placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",onChange:this.handleChange}),c.a.createElement("input",{className:"send-comment-button",type:"submit",value:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}))),c.a.createElement("div",{className:"close",onClick:e(null)}))}}]),a}(c.a.Component)),p=function(e){Object(d.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getGallery=Object(m.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://boiling-refuge-66454.herokuapp.com/images");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n.setState({gallery:a});case 7:case"end":return e.stop()}}),e)}))),n.toggleModal=function(e){return function(t){t.preventDefault();var a=n.state.isModalActive;n.setState({isModalActive:!a,imageModalId:e})}},n.state={gallery:[],isModalActive:!1,imageModalId:null},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getGallery()}},{key:"render",value:function(){var e=this,t=this.state,a=t.gallery,n=t.imageModalId,r=t.isModalActive;return c.a.createElement("div",{className:"main-container"},c.a.createElement("h1",{className:"main-header"},"Gallery"),c.a.createElement("div",{className:"gallery-container"},r&&c.a.createElement(h,{id:n,toggleModal:this.toggleModal}),a.map((function(t){return c.a.createElement("img",{className:"main-img",key:t.id,src:t.url,alt:"",onClick:e.toggleModal(t.id)})}))))}}]),a}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,t,a){e.exports=a(18)}},[[9,1,2]]]);
//# sourceMappingURL=main.771f2a1d.chunk.js.map